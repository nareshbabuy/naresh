CREATE TABLE USER (
   ID BIGINT NOT NULL AUTO_INCREMENT,
   USER_NAME VARCHAR(300) NOT NULL,
   PASSWORD VARCHAR(100) NOT NULL,
   FIRST_NAME VARCHAR(300) NOT NULL,
   LAST_NAME  VARCHAR(300) NOT NULL,
   EMAIL VARCHAR(300) NOT NULL,
   IS_ADMIN TINYINT(1) DEFAULT 0,
   PRIMARY KEY (ID),
   UNIQUE (USER_NAME)
);

INSERT INTO USER(USER_NAME, PASSWORD, FIRST_NAME, LAST_NAME, EMAIL, IS_ADMIN)
VALUES ('naresh','naresh', 'Naresh','Babu','naresh@XYZ.COM',1);

CREATE TABLE PRODUCT(
   ID BIGINT NOT NULL AUTO_INCREMENT,
   NAME VARCHAR(700) NOT NULL,
   DESCRIPTION VARCHAR(700) NOT NULL,
   PRICE DECIMAL(13, 2) NOT NULL,
   PRODUCT_TYPE VARCHAR(300) NOT NULL,
   IMAGE LONGBLOB NOT NULL,
   
    PRIMARY KEY (ID)
   
);

CREATE TABLE CART (
    CART_ID BIGINT NOT NULL AUTO_INCREMENT,
    USER_ID BIGINT NOT NULL,
    PRODUCT_ID BIGINT NOT NULL,
    CART_DATE TIMESTAMP,
    ORDER_DATE TIMESTAMP,
    IS_ORDERED TINYINT(1) DEFAULT 0,
    PRIMARY KEY (CART_ID),
    
    CONSTRAINT FK_CART_APP_USER FOREIGN KEY (USER_ID) REFERENCES USER (ID),
    CONSTRAINT FK_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT (ID)
);


CREATE TABLE COUNTRY(
   ID BIGINT NOT NULL AUTO_INCREMENT,
   NAME VARCHAR(300) NOT NULL,
   
   PRIMARY KEY (ID)
   
);

CREATE TABLE STATE(
   ID BIGINT NOT NULL AUTO_INCREMENT,
   NAME VARCHAR(300) NOT NULL,
   COUNTRY_ID BIGINT NOT NULL,
   
   PRIMARY KEY (ID),
   CONSTRAINT FK_STATE_COUNTRY FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRY (ID)
);

CREATE TABLE CITY(
   ID BIGINT NOT NULL AUTO_INCREMENT,
   NAME VARCHAR(300) NOT NULL,
   STATE_ID BIGINT NOT NULL,
   
   PRIMARY KEY (ID),
   CONSTRAINT FK_CITY_STATE FOREIGN KEY (STATE_ID) REFERENCES STATE (ID)  
);

INSERT INTO COUNTRY VALUES(1,'U.S.A');
INSERT INTO COUNTRY VALUES(2,'CANADA');
INSERT INTO COUNTRY VALUES(3,'INDIA');

INSERT INTO STATE VALUES(1,'CALIFORNIA', 1);
INSERT INTO STATE VALUES(2,'FLORIDA', 1);
INSERT INTO STATE VALUES(3,'NEW YORK', 1);
INSERT INTO STATE VALUES(4,'TEXAS', 1);
INSERT INTO STATE VALUES(5,'NEW JERSEY', 1);

INSERT INTO STATE VALUES(6,'BRITISH COLUMBIA', 2);
INSERT INTO STATE VALUES(7,'ALBERTA', 2);
INSERT INTO STATE VALUES(8,'MANITOBA', 2);
 
INSERT INTO STATE VALUES(9,'KARNATAKA', 3);
INSERT INTO STATE VALUES(10,'ANDHRA PRADESH', 3);
INSERT INTO STATE VALUES(11,'TAMILNADU', 3);

INSERT INTO CITY VALUES(1,'BANGALORE', 9);

INSERT INTO CITY VALUES(2,'HYDERBAD', 10);

INSERT INTO CITY VALUES(3,'CHENNAI', 11);

INSERT INTO CITY VALUES(4,'LOS ANGELES', 1);

CREATE TABLE ADDRESS (
    ADD_ID BIGINT NOT NULL AUTO_INCREMENT,
    USER_ID BIGINT NOT NULL,
    NAME VARCHAR(300) NOT NULL,
    PINCODE INT(6) NOT NULL,
    ADDRESS VARCHAR(300) NOT NULL,
    LANDMARK VARCHAR(100) NOT NULL,
    CITY_ID BIGINT NOT NULL,
    STATE_ID BIGINT NOT NULL,
    COUNTRY_ID BIGINT NOT NULL,
    PHONE VARCHAR(15) NOT NULL,
    PRIMARY KEY (ADD_ID),
    
    CONSTRAINT FK_ADDRESS_APP_USER FOREIGN KEY (USER_ID) REFERENCES USER (ID),
    CONSTRAINT FK_COUNTRY FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRY (ID),
    CONSTRAINT FK_CITY FOREIGN KEY (CITY_ID) REFERENCES CITY (ID),
    CONSTRAINT FK_STATE FOREIGN KEY (STATE_ID) REFERENCES STATE (ID)
);

CREATE TABLE CARD(
    CARD_ID BIGINT NOT NULL  AUTO_INCREMENT,
    USER_ID BIGINT NOT NULL,
    NAME VARCHAR(40) NOT NULL ,
    CARD_NUMBER BIGINT NOT NULL,
    MONTH INT NOT NULL,
    YEAR INT NOT NULL,
    CVV INT NOT NULL,
    
    PRIMARY KEY (CARD_ID),
    CONSTRAINT FK_CARD_USER FOREIGN KEY (USER_ID) REFERENCES USER (ID)
) ;